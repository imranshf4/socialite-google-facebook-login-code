<!DOCTYPE html>
<html lang="bn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>কার্ট সিস্টেম</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .product-image {
            height: 200px;
            background-color: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: #6c757d;
        }

        .product-info {
            padding: 20px;
        }

        .product-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .product-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 15px;
        }

        .add-to-cart {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            width: 100%;
            transition: background 0.3s ease;
        }

        .add-to-cart:hover {
            background: #2980b9;
        }

        .cart-summary {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 40px;
        }

        .cart-summary h2 {
            margin-bottom: 20px;
            color: #2c3e50;
            border-bottom: 2px solid #f1f1f1;
            padding-bottom: 10px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #f1f1f1;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            font-size: 1.3rem;
            font-weight: bold;
            border-top: 2px solid #f1f1f1;
            margin-top: 10px;
        }

        .instructions {
            background: #e8f4fc;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 5px solid #3498db;
        }

        .instructions h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .instructions ul {
            padding-left: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        /* ফিক্সড কার্ট স্টিকি স্টাইল */
        .fixed_product_sticky {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #2c3e50;
            color: #fff;
            padding: 12px 18px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: transform 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        .fixed_product_sticky_icon {
            font-size: 1.5rem;
        }

        .fixed_product_sticky_price p,
        .fixed_product_sticky_count p {
            margin: 0;
            font-size: 0.9rem;
        }

        .fixed_product_sticky.bounce {
            animation-name: bounceAnim;
            animation-duration: 2s;
            animation-fill-mode: forwards;
        }

        @keyframes bounceAnim {
            15% {
                transform: translateY(70px)
            }

            30% {
                transform: translateY(0)
            }

            45% {
                transform: translateY(60px)
            }

            60% {
                transform: translateY(0)
            }

            75% {
                transform: translateY(50px)
            }

            90% {
                transform: translateY(0)
            }

            to {
                transform: translateY(0)
            }
        }

        .price-increment {
            animation: pricePulse 0.8s ease;
        }

        @keyframes pricePulse {
            0% {
                transform: scale(1);
                color: #2c3e50;
            }

            50% {
                transform: scale(1.3);
                color: #e74c3c;
                font-weight: bold;
            }

            100% {
                transform: scale(1);
                color: #2c3e50;
            }
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #7f8c8d;
            border-top: 1px solid #ecf0f1;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>কার্ট সিস্টেম ডেমো</h1>
            <p class="subtitle">কার্টে আইটেম যোগ করুন এবং বাউন্স অ্যানিমেশন দেখুন</p>
        </header>

        <div class="instructions">
            <h3>কিভাবে ব্যবহার করবেন:</h3>
            <ul>
                <li>নিচের যেকোনো পণ্যের "কার্টে যোগ করুন" বাটনে ক্লিক করুন</li>
                <li>নিচের ডান কোণায় ফিক্সড কার্ট আইকনটি দেখুন - এটি বাউন্স করবে</li>
                <li>প্রতিবার প্রাইস ০ থেকে শুরু করে টোটাল প্রাইস পর্যন্ত ইনক্রিমেন্ট হবে</li>
            </ul>
        </div>

        <div class="products">
            <div class="product-card">
                <div class="product-image">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <div class="product-info">
                    <h3 class="product-title">স্মার্টফোন</h3>
                    <p class="product-price">১৫,০০০ TK</p>
                    <button class="add-to-cart" data-price="15000">কার্টে যোগ করুন</button>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <i class="fas fa-laptop"></i>
                </div>
                <div class="product-info">
                    <h3 class="product-title">ল্যাপটপ</h3>
                    <p class="product-price">৫৫,০০০ TK</p>
                    <button class="add-to-cart" data-price="55000">কার্টে যোগ করুন</button>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <i class="fas fa-headphones"></i>
                </div>
                <div class="product-info">
                    <h3 class="product-title">হেডফোন</h3>
                    <p class="product-price">২,৫০০ TK</p>
                    <button class="add-to-cart" data-price="2500">কার্টে যোগ করুন</button>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <i class="fas fa-tablet-alt"></i>
                </div>
                <div class="product-info">
                    <h3 class="product-title">ট্যাবলেট</h3>
                    <p class="product-price">২৫,০০০ TK</p>
                    <button class="add-to-cart" data-price="25000">কার্টে যোগ করুন</button>
                </div>
            </div>
        </div>

        <div class="cart-summary">
            <h2>আপনার কার্ট সুমারি</h2>
            <div id="cart-items">
                <p class="empty-cart">আপনার কার্টে এখনও কোনো পণ্য নেই</p>
            </div>
            <div class="cart-total">
                <span>মোট:</span>
                <span id="summary-total">০ TK</span>
            </div>
        </div>

        <footer>
            <p>কার্ট সিস্টেম ডেমো - jQuery ব্যবহার করে তৈরি</p>
        </footer>
    </div>

    <!-- ফিক্সড কার্ট স্টিকি -->
    <a class="fixed_product_sticky" href="#">
        <div class="fixed_product_sticky_icon">
            <i class="fa-solid fa-cart-shopping"></i>
        </div>
        <div class="fixed_product_sticky_price">
            <p class="subTotal">০ TK</p>
        </div>
        <div class="fixed_product_sticky_count">
            <p id="item_count">০ items</p>
        </div>
    </a>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            let cartItems = [];
            let totalPrice = 0;
            let itemCount = 0;
            let isAnimating = false;

            // প্রাইস ইনক্রিমেন্ট অ্যানিমেশন ফাংশন
            function animatePriceIncrement(startPrice, endPrice, element) {
                if (isAnimating) return;
                isAnimating = true;

                let current = startPrice;
                const steps = 30; // steps
                const increment = (endPrice - startPrice) / steps;
                const duration = 800; // milliseconds
                const stepTime = duration / steps;

                element.addClass('price-increment');

                const timer = setInterval(() => {
                    current += increment;
                    if (current >= endPrice) {
                        current = endPrice;
                        clearInterval(timer);
                        setTimeout(() => {
                            element.removeClass('price-increment');
                            isAnimating = false;
                        }, 200);
                    }
                    element.text(Math.round(current).toLocaleString() + ' TK');
                }, stepTime);
            }

            // কার্টে আইটেম যোগ করার ফাংশন
            function addToCart(productName, price) {
                // নতুন টোটাল প্রাইস ক্যালকুলেট করা
                let newTotalPrice = totalPrice + price;

                // কার্টে নতুন আইটেম যোগ করা
                cartItems.push({ name: productName, price: price });

                // ০ থেকে নতুন টোটাল প্রাইস পর্যন্ত ইনক্রিমেন্ট অ্যানিমেশন
                animatePriceIncrement(0, newTotalPrice, $('.subTotal'));

                // কার্ট সুমারিতেও ০ থেকে নতুন টোটাল পর্যন্ত ইনক্রিমেন্ট অ্যানিমেশন
                animatePriceIncrement(0, newTotalPrice, $('#summary-total'));

                // টোটাল প্রাইস আপডেট করা
                totalPrice = newTotalPrice;

                // আইটেম কাউন্ট আপডেট করা
                itemCount++;
                $('#item_count').text(itemCount + (itemCount === 1 ? ' item' : ' items'));

                // বাউন্স অ্যানিমেশন
                let sticky = $('.fixed_product_sticky');
                sticky.addClass('bounce');
                setTimeout(() => {
                    sticky.removeClass('bounce');
                }, 400);

                // কার্ট সুমারি আপডেট
                updateCartSummary(productName, price);
            }

            // কার্ট সুমারি আপডেট করার ফাংশন
            function updateCartSummary(productName, price) {
                // খালি কার্ট মেসেজ সরানো
                if ($('#cart-items .empty-cart').length > 0) {
                    $('#cart-items').empty();
                }

                // নতুন আইটেম যোগ করা
                $('#cart-items').prepend(`
                    <div class="cart-item new-item">
                        <span>${productName}</span>
                        <span>${price.toLocaleString()} TK</span>
                    </div>
                `);

                // নতুন আইটেম হাইলাইট করা
                $('.new-item').css('background', '#f8f9fa');
                setTimeout(() => {
                    $('.new-item').css('background', 'transparent').removeClass('new-item');
                }, 1000);
            }

            // "কার্টে যোগ করুন" বাটনে ক্লিক ইভেন্ট
            $('.add-to-cart').click(function () {
                if (isAnimating) return;

                let price = parseInt($(this).data('price'));
                let productName = $(this).closest('.product-card').find('.product-title').text();

                addToCart(productName, price);

                // ব্যবহারকারীকে ফিডব্যাক দেওয়া
                let originalText = $(this).text();
                $(this).text('যোগ করা হয়েছে!').css('background', '#2ecc71').prop('disabled', true);

                setTimeout(() => {
                    $(this).text(originalText).css('background', '#3498db').prop('disabled', false);
                }, 1500);
            });
        });
    </script>

    <!-- live project code  -->
    <script>
        //=========================add to cart=========================

        // function addToCard(event, id, have_variant) {
        //     let quantity = $(".product_qty").val();
        //     let variants = {};
        //     let firstMissingVariant = null;

        //     $('input[name^="variant"]').each(function () {
        //         let variantName = $(this).attr('name').replace('variant', ''); // Remove "variant" prefix
        //         variantName = variantName.trim();

        //         if (!$(`input[name="variant${variantName}"]:checked`).val()) {
        //             // If no option is selected for this variant, setting it as the first missing variant
        //             if (!firstMissingVariant) {
        //                 firstMissingVariant = variantName;
        //             }
        //         } else {
        //             // If selected, add it to the variants 
        //             variants[variantName] = $(`input[name="variant${variantName}"]:checked`).val();
        //         }
        //     });

        //     // Show missing variant (if any)
        //     if (firstMissingVariant) {
        //         toastr.info(`Please select ${firstMissingVariant}`);
        //         event.preventDefault();
        //         return;
        //     }
        //     page_url = window.location.href;
        //     var postData = {
        //         id,
        //         quantity,
        //         page_url,
        //         variants
        //     };

        //     $.ajax({
        //         type: "POST",
        //         dataType: 'json',
        //         data: postData,
        //         url: "/add/cart",
        //         success: function (res) {
        //             console.log('addToCard', res);
        //             miniCart();
        //             gtmEvent(id, 'add_to_cart', quantity, res.event_id);
        //             toastr.success('Added to Cart Successfully');
        //             // $('#fixed_product_sticky_id').offcanvas('show');
        //             // setTimeout(() => {
        //             //     $('#fixed_product_sticky_id').offcanvas('hide');
        //             // }, 3000);

        //             // ===== Animation Start =====
        //             let price = parseInt(res.cart.price || 0);
        //             let productName = res.product_name || "Product";

        //             // bounce animation
        //             let sticky = $('.fixed_product_sticky');
        //             sticky.addClass('bounce');
        //             setTimeout(() => sticky.removeClass('bounce'), 800);

        //             // ===== Price increment animation =====
        //             let subtotalEl = $('#stickySubtotal') // or $('#stickySubtotal')
        //             let oldTotal = parseInt(subtotalEl.text().replace(/[^\d]/g, '')) || 0;
        //             let newTotal = oldTotal + price;

        //             // console.log('oldTotal:', oldTotal);
        //             // console.log('newTotal:', newTotal);
        //             // console.log('price:', price);

        //             animatePriceIncrement(0, newTotal, subtotalEl);

        //         }
        //     });

        //     return true;
        // }

        // // ===== Animation Functions =====
        // let isAnimating = false;

        // function animatePriceIncrement(startPrice, endPrice, element) {
        //     if (!element || !element.length) {
        //         console.warn('animatePriceIncrement: element not found');
        //         return;
        //     }

        //     // Clean numeric parsing
        //     startPrice = parseInt(startPrice) || 0;
        //     endPrice = parseInt(endPrice) || 0;

        //     if (startPrice === endPrice) {
        //         element.text(endPrice.toLocaleString() + ' TK');
        //         return;
        //     }

        //     if (isAnimating) return;
        //     isAnimating = true;

        //     let current = startPrice;
        //     const steps = 30;
        //     const increment = (endPrice - startPrice) / steps;
        //     const duration = 800;
        //     const stepTime = duration / steps;

        //     element.addClass('price-increment');

        //     const timer = setInterval(() => {
        //         current += increment;
        //         if ((increment > 0 && current >= endPrice) || (increment < 0 && current <= endPrice)) {
        //             current = endPrice;
        //             clearInterval(timer);
        //             setTimeout(() => {
        //                 element.removeClass('price-increment');
        //                 isAnimating = false;
        //             }, 200);
        //         }
        //         element.text(Math.round(current).toLocaleString() + ' TK');
        //     }, stepTime);
        // }
    </script>
</body>

</html>